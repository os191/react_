{"ast":null,"code":"var _jsxFileName = \"/Users/gongjin/react/react-jl/src/componets/upload/UploadImg.jsx\";\nimport React, { Component } from 'react';\nimport { Upload, Icon, message } from 'antd';\n\nfunction getBase64(img, callback) {\n  const reader = new FileReader();\n  reader.addEventListener('load', () => callback(reader.result));\n  reader.readAsDataURL(img);\n}\n\nfunction beforeUpload(file) {\n  const isJPG = file.type === 'image/jpeg';\n\n  if (!isJPG) {\n    message.error('You can only upload JPG file!');\n  }\n\n  const isLt2M = file.size / 1024 / 1024 < 2;\n\n  if (!isLt2M) {\n    message.error('Image must smaller than 2MB!');\n  }\n\n  return isJPG && isLt2M;\n}\n\nclass UploadImg extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = info => {\n      if (info.file.status === 'uploading') {\n        this.setState({\n          loading: true\n        });\n        return;\n      }\n\n      if (info.file.status === 'done') {\n        // Get this url from response in real world.\n        getBase64(info.file.originFileObj, imageUrl => this.setState({\n          imageUrl,\n          loading: false\n        }));\n      }\n    };\n\n    this.state = {\n      loading: false\n    };\n  }\n\n  render() {\n    const uploadButton = React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: this.state.loading ? 'loading' : 'plus',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"ant-upload-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, \"Upload\"));\n    const imageUrl = this.state.imageUrl;\n    return React.createElement(Upload, {\n      name: \"avatar\",\n      listType: \"picture-card\",\n      className: \"avatar-uploader\",\n      showUploadList: false,\n      action: \"https://www.mocky.io/v2/5cc8019d300000980a055e76\",\n      beforeUpload: beforeUpload,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, imageUrl ? React.createElement(\"img\", {\n      src: imageUrl,\n      alt: \"avatar\",\n      style: {\n        width: '100px',\n        height: '100px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }) : uploadButton);\n  }\n\n}\n\nexport default UploadImg;","map":{"version":3,"sources":["/Users/gongjin/react/react-jl/src/componets/upload/UploadImg.jsx"],"names":["React","Component","Upload","Icon","message","getBase64","img","callback","reader","FileReader","addEventListener","result","readAsDataURL","beforeUpload","file","isJPG","type","error","isLt2M","size","UploadImg","constructor","props","handleChange","info","status","setState","loading","originFileObj","imageUrl","state","render","uploadButton","width","height"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,EAAiBC,IAAjB,EAAuBC,OAAvB,QAAsC,MAAtC;;AAEA,SAASC,SAAT,CAAmBC,GAAnB,EAAwBC,QAAxB,EAAkC;AAC9B,QAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;AACAD,EAAAA,MAAM,CAACE,gBAAP,CAAwB,MAAxB,EAAgC,MAAMH,QAAQ,CAACC,MAAM,CAACG,MAAR,CAA9C;AACAH,EAAAA,MAAM,CAACI,aAAP,CAAqBN,GAArB;AACD;;AAED,SAASO,YAAT,CAAsBC,IAAtB,EAA4B;AAC1B,QAAMC,KAAK,GAAGD,IAAI,CAACE,IAAL,KAAc,YAA5B;;AACA,MAAI,CAACD,KAAL,EAAY;AACVX,IAAAA,OAAO,CAACa,KAAR,CAAc,+BAAd;AACD;;AACD,QAAMC,MAAM,GAAGJ,IAAI,CAACK,IAAL,GAAY,IAAZ,GAAmB,IAAnB,GAA0B,CAAzC;;AACA,MAAI,CAACD,MAAL,EAAa;AACXd,IAAAA,OAAO,CAACa,KAAR,CAAc,8BAAd;AACD;;AACD,SAAOF,KAAK,IAAIG,MAAhB;AACD;;AAEH,MAAME,SAAN,SAAwBnB,SAAxB,CAAkC;AAC9BoB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAOnBC,YAPmB,GAOJC,IAAI,IAAI;AACnB,UAAIA,IAAI,CAACV,IAAL,CAAUW,MAAV,KAAqB,WAAzB,EAAsC;AACpC,aAAKC,QAAL,CAAc;AAAEC,UAAAA,OAAO,EAAE;AAAX,SAAd;AACA;AACD;;AACD,UAAIH,IAAI,CAACV,IAAL,CAAUW,MAAV,KAAqB,MAAzB,EAAiC;AAC/B;AACApB,QAAAA,SAAS,CAACmB,IAAI,CAACV,IAAL,CAAUc,aAAX,EAA0BC,QAAQ,IACzC,KAAKH,QAAL,CAAc;AACZG,UAAAA,QADY;AAEZF,UAAAA,OAAO,EAAE;AAFG,SAAd,CADO,CAAT;AAMD;AACF,KArBgB;;AAEf,SAAKG,KAAL,GAAa;AACTH,MAAAA,OAAO,EAAE;AADA,KAAb;AAGH;;AAiBDI,EAAAA,MAAM,GAAG;AACL,UAAMC,YAAY,GACd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,IAAI,EAAE,KAAKF,KAAL,CAAWH,OAAX,GAAqB,SAArB,GAAiC,MAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,CADJ;AADK,UAOKE,QAPL,GAOkB,KAAKC,KAPvB,CAOKD,QAPL;AAQL,WACI,oBAAC,MAAD;AACI,MAAA,IAAI,EAAC,QADT;AAEI,MAAA,QAAQ,EAAC,cAFb;AAGI,MAAA,SAAS,EAAC,iBAHd;AAII,MAAA,cAAc,EAAE,KAJpB;AAKI,MAAA,MAAM,EAAC,kDALX;AAMI,MAAA,YAAY,EAAEhB,YANlB;AAOI,MAAA,QAAQ,EAAE,KAAKU,YAPnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OASKM,QAAQ,GAAG;AAAK,MAAA,GAAG,EAAEA,QAAV;AAAoB,MAAA,GAAG,EAAC,QAAxB;AAAiC,MAAA,KAAK,EAAE;AAACI,QAAAA,KAAK,EAAE,OAAR;AAAgBC,QAAAA,MAAM,EAAC;AAAvB,OAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAH,GAAgFF,YAT7F,CADJ;AAaH;;AA5C6B;;AA+ClC,eAAeZ,SAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Upload, Icon, message } from 'antd';\n\nfunction getBase64(img, callback) {\n    const reader = new FileReader();\n    reader.addEventListener('load', () => callback(reader.result));\n    reader.readAsDataURL(img);\n  }\n\n  function beforeUpload(file) {\n    const isJPG = file.type === 'image/jpeg';\n    if (!isJPG) {\n      message.error('You can only upload JPG file!');\n    }\n    const isLt2M = file.size / 1024 / 1024 < 2;\n    if (!isLt2M) {\n      message.error('Image must smaller than 2MB!');\n    }\n    return isJPG && isLt2M;\n  }\n\nclass UploadImg extends Component {\n    constructor(props) {\n        super(props);\n        this.state = { \n            loading: false,\n         };\n    }\n    \n    handleChange = info => {\n        if (info.file.status === 'uploading') {\n          this.setState({ loading: true });\n          return;\n        }\n        if (info.file.status === 'done') {\n          // Get this url from response in real world.\n          getBase64(info.file.originFileObj, imageUrl =>\n            this.setState({\n              imageUrl,\n              loading: false,\n            }),\n          );\n        }\n      };\n    render() {\n        const uploadButton = (\n            <div>\n              <Icon type={this.state.loading ? 'loading' : 'plus'} />\n              <div className=\"ant-upload-text\">Upload</div>\n            </div>\n          );\n          const { imageUrl } = this.state;\n        return (\n            <Upload\n                name=\"avatar\"\n                listType=\"picture-card\"\n                className=\"avatar-uploader\"\n                showUploadList={false}\n                action=\"https://www.mocky.io/v2/5cc8019d300000980a055e76\"\n                beforeUpload={beforeUpload}\n                onChange={this.handleChange}\n            >\n                {imageUrl ? <img src={imageUrl} alt=\"avatar\" style={{width: '100px',height:'100px'}}/> : uploadButton}\n            </Upload>\n        );\n    }\n}\n\nexport default UploadImg;"]},"metadata":{},"sourceType":"module"}